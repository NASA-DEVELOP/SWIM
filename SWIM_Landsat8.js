// Notices:
// This software may be used, reproduced, and provided to others only as permitted 
// under the terms of the agreement under which it was acquired from the U.S.
//  Government. Neither title to, nor ownership of, the software is hereby 
// transferred. This notice shall remain on all copies of the software.
 
// Disclaimers
// No Warranty: THE SUBJECT SOFTWARE IS PROVIDED "AS IS" WITHOUT ANY WARRANTY OF ANY
//  KIND, EITHER EXPRESSED, IMPLIED, OR STATUTORY, INCLUDING, BUT NOT LIMITED TO, ANY 
// WARRANTY THAT THE SUBJECT SOFTWARE WILL CONFORM TO SPECIFICATIONS, ANY IMPLIED 
// WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, OR FREEDOM FROM
//  INFRINGEMENT, ANY WARRANTY THAT THE SUBJECT SOFTWARE WILL BE ERROR FREE, OR ANY
//  WARRANTY THAT DOCUMENTATION, IF PROVIDED, WILL CONFORM TO THE SUBJECT SOFTWARE.
//  THIS AGREEMENT DOES NOT, IN ANY MANNER, CONSTITUTE AN ENDORSEMENT BY GOVERNMENT
//  AGENCY OR ANY PRIOR RECIPIENT OF ANY RESULTS, RESULTING DESIGNS, HARDWARE, 
// SOFTWARE PRODUCTS OR ANY OTHER APPLICATIONS RESULTING FROM USE OF THE SUBJECT
//  SOFTWARE.  FURTHER, GOVERNMENT AGENCY DISCLAIMS ALL WARRANTIES AND LIABILITIES 
// REGARDING THIRD-PARTY SOFTWARE, IF PRESENT IN THE ORIGINAL SOFTWARE, AND 
// DISTRIBUTES IT "AS IS."â€¨
 
// Waiver and Indemnity:  RECIPIENT AGREES TO WAIVE ANY AND ALL CLAIMS AGAINST THE 
// UNITED STATES GOVERNMENT, ITS CONTRACTORS AND SUBCONTRACTORS, AS WELL AS ANY PRIOR 
// RECIPIENT.  IF RECIPIENT'S USE OF THE SUBJECT SOFTWARE RESULTS IN ANY LIABILITIES,
//  DEMANDS, DAMAGES, EXPENSES OR LOSSES ARISING FROM SUCH USE, INCLUDING ANY DAMAGES
//  FROM PRODUCTS BASED ON, OR RESULTING FROM, RECIPIENT'S USE OF THE SUBJECT 
// SOFTWARE, RECIPIENT SHALL INDEMNIFY AND HOLD HARMLESS THE UNITED STATES 
// GOVERNMENT, ITS CONTRACTORS AND SUBCONTRACTORS, AS WELL AS ANY PRIOR RECIPIENT, TO 
// THE EXTENT PERMITTED BY LAW.  RECIPIENT'S SOLE REMEDY FOR ANY SUCH MATTER SHALL BE
//  THE IMMEDIATE, UNILATERAL TERMINATION OF THIS AGREEMENT.


//*************************************************************************************************************************
//********************************Repositories*****************************************************************************
//*************************************************************************************************************************

// Below is the JavaScript for specific repositories and current training polygons. Hold your cursor over the code and click "Convert" until there is not longer any code in this section.
var SRTM_DEM = ee.Image("USGS/SRTMGL1_003"),
    L8 = ee.ImageCollection("LANDSAT/LC8_L1T"),
    surfaceReflectanceL8 = ee.ImageCollection("LANDSAT/LC8_SR"),
    TOA8 = ee.ImageCollection("LANDSAT/LC8_L1T_TOA"),
    basalt = /* color: #d63000 */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.39710235595703, 43.50650913666999],
                  [-113.39401245117188, 43.50650913666999],
                  [-113.39366912841797, 43.50800318224111],
                  [-113.39658737182617, 43.508252186241016]]]),
            {
              "class": 0,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.36380004882812, 43.464162539545164],
                  [-113.36174011230469, 43.46403794676844],
                  [-113.36122512817383, 43.4650346817922],
                  [-113.36294174194336, 43.4652838629803]]]),
            {
              "class": 0,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.53413105010986, 43.18869568580295],
                  [-113.53404521942139, 43.189540502804014],
                  [-113.53477478027344, 43.18957179209803],
                  [-113.53477478027344, 43.188789554936065]]]),
            {
              "class": 0,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.52713584899902, 43.18127956811228],
                  [-113.52717876434326, 43.18174896935597],
                  [-113.5277795791626, 43.181811555915765],
                  [-113.52769374847412, 43.181436035594515]]]),
            {
              "class": 0,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.5350751876831, 43.16847917775034],
                  [-113.53443145751953, 43.168416577524866],
                  [-113.53434562683105, 43.168823477843574],
                  [-113.53490352630615, 43.168854777755804]]]),
            {
              "class": 0,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.5527134151198, 43.15573870232243],
                  [-113.55211260030046, 43.155676089041194],
                  [-113.55219843098894, 43.15614568708671],
                  [-113.55284216115251, 43.15614568708671]]]),
            {
              "class": 0,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.5827112197876, 43.14365315038564],
                  [-113.58211040496826, 43.14355921186704],
                  [-113.58211040496826, 43.14396627773848],
                  [-113.5827112197876, 43.14402890301658]]]),
            {
              "class": 0,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.18681716918945, 42.77993487854155],
                  [-113.1863021850586, 42.78094282166994],
                  [-113.18750381469727, 42.78157277779278],
                  [-113.18801879882812, 42.78056484491967]]]),
            {
              "class": 0,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.20896157063544, 42.72585988171431],
                  [-113.2072449568659, 42.725733777689854],
                  [-113.2072449568659, 42.7268687046815],
                  [-113.20844658650458, 42.72699480639886]]]),
            {
              "class": 0,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.3071517944336, 42.90114811174559],
                  [-113.30629348754883, 42.90202833432999],
                  [-113.30766677856445, 42.902279824188795]]]),
            {
              "class": 0,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.3074951171875, 42.903020288861065],
                  [-113.30629348754883, 42.90352325946013],
                  [-113.30672264099121, 42.90402622595576],
                  [-113.30758094787598, 42.903649001468736]]]),
            {
              "class": 0,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.30517768859863, 42.89421763913794],
                  [-113.30406188964844, 42.89415475854837],
                  [-113.30414772033691, 42.894846441507404],
                  [-113.30509185791016, 42.894783561558974]]]),
            {
              "class": 0,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.19685935974121, 42.74003094292735],
                  [-113.19522857666016, 42.74003094292735],
                  [-113.1950569152832, 42.74072435202031],
                  [-113.19677352905273, 42.74072435202031]]]),
            {
              "class": 0,
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.24960231781006, 42.74853264090445],
                  [-113.24938774108887, 42.74922595491193],
                  [-113.25041770935059, 42.74922595491193],
                  [-113.25033187866211, 42.748564155345754]]]),
            {
              "class": 0,
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.36912155151367, 43.53862442512949],
                  [-113.36671829223633, 43.53812666676294],
                  [-113.36637496948242, 43.53949549238346],
                  [-113.36860656738281, 43.53949549238346]]]),
            {
              "class": 0,
              "system:index": "14"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.34938049316406, 43.532651053530884],
                  [-113.34663391113281, 43.532526601997226],
                  [-113.3462905883789, 43.53364665655478],
                  [-113.34920883178711, 43.53389555474257]]]),
            {
              "class": 0,
              "system:index": "15"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.36641788482666, 43.56068535636922],
                  [-113.36508750915527, 43.56068535636922],
                  [-113.36517333984375, 43.56168049646373],
                  [-113.36663246154785, 43.56177379000487]]]),
            {
              "class": 0,
              "system:index": "16"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.38980674743652, 43.55788643672906],
                  [-113.38916301727295, 43.55704673548328],
                  [-113.38761806488037, 43.55704673548328],
                  [-113.38770389556885, 43.55788643672906],
                  [-113.38950634002686, 43.55804193567563]]]),
            {
              "class": 0,
              "system:index": "17"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.37384223937988, 43.464483571605456],
                  [-113.37294101715088, 43.46445242360074],
                  [-113.37276935577393, 43.46538685676023],
                  [-113.3739709854126, 43.46538685676023]]]),
            {
              "class": 0,
              "system:index": "18"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.33483220194466, 43.460247295637494],
                  [-113.33393097971566, 43.46034074610326],
                  [-113.33418847178109, 43.46087029601425],
                  [-113.33500386332162, 43.46068339657527]]]),
            {
              "class": 0,
              "system:index": "19"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.31637859344482, 43.45286425241404],
                  [-113.31624984741211, 43.45348732886204],
                  [-113.3170223236084, 43.45339386780409]]]),
            {
              "class": 0,
              "system:index": "20"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.34749221801758, 43.43874985151539],
                  [-113.34680557250977, 43.43874985151539],
                  [-113.346848487854, 43.43959119949236],
                  [-113.34766387939453, 43.439560038664794]]]),
            {
              "class": 0,
              "system:index": "21"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.35712671279907, 43.4136871815171],
                  [-113.35528135299683, 43.41364042026312],
                  [-113.35534572601318, 43.414419769782164],
                  [-113.35678339004517, 43.41440418289004]]]),
            {
              "class": 0,
              "system:index": "22"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.26224901387468, 43.320385025868056],
                  [-112.26061823079363, 43.3204474701258],
                  [-112.26224901387468, 43.32138412629042]]]),
            {
              "class": 0,
              "system:index": "23"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.19351196289062, 42.87176494878235],
                  [-113.19437026977539, 42.87296010268599],
                  [-113.19522857666016, 42.8722681742995]]]),
            {
              "class": 0,
              "system:index": "24"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.17591667175293, 42.861322093417236],
                  [-113.17514419555664, 42.86201414451082],
                  [-113.17651748657227, 42.861762490465246]]]),
            {
              "class": 0,
              "system:index": "25"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.21617126464844, 42.86000088150511],
                  [-113.21539878845215, 42.86075586210539],
                  [-113.21720123291016, 42.86075586210539]]]),
            {
              "class": 0,
              "system:index": "26"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.27951431274414, 42.87951682019645],
                  [-113.27779769897461, 42.88027156211821],
                  [-113.2796859741211, 42.880397351540935]]]),
            {
              "class": 0,
              "system:index": "27"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.44276428222656, 43.10726466410832],
                  [-113.44173431396484, 43.108392585818294],
                  [-113.44353675842285, 43.108141938345575]]]),
            {
              "class": 0,
              "system:index": "28"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.47023010253906, 43.08275856843688],
                  [-113.4697151184082, 43.08319738269567],
                  [-113.47065925598145, 43.08319738269567]]]),
            {
              "class": 0,
              "system:index": "29"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.12493324279785, 42.79295959055751],
                  [-113.12355995178223, 42.79327450828048],
                  [-113.12519073486328, 42.79396732163038]]]),
            {
              "class": 0,
              "system:index": "30"
            })]),
    OpenWater = /* color: #98ff00 */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.74453163146973, 42.912339559549984],
                  [-112.74401664733887, 42.91303103851512],
                  [-112.74530410766602, 42.91290531564398]]]),
            {
              "class": 1,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.7816104888916, 42.87937530529824],
                  [-112.78066635131836, 42.88013004895104],
                  [-112.78178215026855, 42.880255838662265]]]),
            {
              "class": 1,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.74693488812773, 42.92150103003884],
                  [-112.74607658124296, 42.92212955414765],
                  [-112.7470207188162, 42.92225525819998]]]),
            {
              "class": 1,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.88280487060547, 42.810825192953175],
                  [-112.88143157958984, 42.812588202390685],
                  [-112.8841781616211, 42.812588202390685]]]),
            {
              "class": 1,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.93378829956055, 42.730069440640285],
                  [-112.9339599609375, 42.73164561234754],
                  [-112.9354190826416, 42.730573819944496]]]),
            {
              "class": 1,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.9603099822998, 42.70169150177727],
                  [-112.96065330505371, 42.70301609429941],
                  [-112.96168327331543, 42.702385339480024]]]),
            {
              "class": 1,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.34165573120117, 42.660882382804914],
                  [-113.34028244018555, 42.66176602783464],
                  [-113.34182739257812, 42.66189226181371]]]),
            {
              "class": 1,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.43555450439453, 42.6694658315294],
                  [-113.43366622924805, 42.670349354560194],
                  [-113.43538284301758, 42.67060178740511]]]),
            {
              "class": 1,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.28120422363281, 42.09063933365979],
                  [-111.27845764160156, 42.09369655746082],
                  [-111.28189086914062, 42.093951319459315]]]),
            {
              "class": 1,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.29837036132812, 42.13342705663506],
                  [-111.29837036132812, 42.13571844092573],
                  [-111.30077362060547, 42.13393626030839]]]),
            {
              "class": 1,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.31871223449707, 42.13353396791277],
                  [-111.31892681121826, 42.13417047079036],
                  [-111.31927013397217, 42.133693094231845]]]),
            {
              "class": 1,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.27442359924316, 42.133470317273186],
                  [-111.27433776855469, 42.134138645798394],
                  [-111.27515316009521, 42.13359761848837]]]),
            {
              "class": 1,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.28862857818604, 42.162997342739054],
                  [-111.2883710861206, 42.16356992905293],
                  [-111.28905773162842, 42.163283636543724]]]),
            {
              "class": 1,
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.29849910736084, 42.16757416257629],
                  [-111.29802703857422, 42.167828627612685],
                  [-111.29894971847534, 42.168353458517515],
                  [-111.29894971847534, 42.167908147726635]]]),
            {
              "class": 1,
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.29967927932739, 42.17205895893842],
                  [-111.29961490631104, 42.17253604621522],
                  [-111.30064487457275, 42.17256785190572],
                  [-111.30060195922852, 42.172043055967215],
                  [-111.30000114440918, 42.172043055967215]]]),
            {
              "class": 1,
              "system:index": "14"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.30163192749023, 42.17442845696464],
                  [-111.30060195922852, 42.174492066426396],
                  [-111.30060195922852, 42.17500093981711],
                  [-111.30150318145752, 42.17495323311065]]]),
            {
              "class": 1,
              "system:index": "15"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.32326126098633, 42.157442441735014],
                  [-111.32323980331421, 42.15949436550454],
                  [-111.32362604141235, 42.15951027163046],
                  [-111.32362604141235, 42.157490161648134]]]),
            {
              "class": 1,
              "system:index": "16"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.32476329803467, 42.16542707307816],
                  [-111.32482767105103, 42.16677895274022],
                  [-111.32517099380493, 42.16681076132559],
                  [-111.32514953613281, 42.16542707307816]]]),
            {
              "class": 1,
              "system:index": "17"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.32585763931274, 42.17073899866118],
                  [-111.32594347000122, 42.17298132436612],
                  [-111.32624387741089, 42.172917713384955],
                  [-111.32620096206665, 42.17083441839567]]]),
            {
              "class": 1,
              "system:index": "18"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.32690906524658, 42.176289007227524],
                  [-111.32705926895142, 42.17919898899962],
                  [-111.32770299911499, 42.17918308782374],
                  [-111.32763862609863, 42.17636851670555]]]),
            {
              "class": 1,
              "system:index": "19"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.35832309853868, 42.31078709284416],
                  [-111.35791540276841, 42.31085056498169],
                  [-111.35791540276841, 42.31343700013874],
                  [-111.35825872552232, 42.313389397997774],
                  [-111.3582372678502, 42.311263132315396]]]),
            {
              "class": 1,
              "system:index": "20"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.34852230548859, 42.33288460623789],
                  [-111.34709000587463, 42.33289650308957],
                  [-111.34709000587463, 42.33315823325733],
                  [-111.34674668312073, 42.33315426765685],
                  [-111.34674668312073, 42.33343185908634],
                  [-111.34635508060455, 42.33342392791964],
                  [-111.34636580944061, 42.33369358702624],
                  [-111.34709537029266, 42.33370944929062],
                  [-111.34711682796478, 42.33342392791964],
                  [-111.34746551513672, 42.33342392791964],
                  [-111.34747087955475, 42.33315426765685],
                  [-111.34854912757874, 42.33314633645516]]]),
            {
              "class": 1,
              "system:index": "21"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.35072708129883, 42.33313840525244],
                  [-111.35073244571686, 42.33261494366273],
                  [-111.34962737560272, 42.33261494366273],
                  [-111.34963274002075, 42.33315030205613]]]),
            {
              "class": 1,
              "system:index": "22"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.34896755218506, 42.34177885753789],
                  [-111.348597407341, 42.341782822594524],
                  [-111.34853839874268, 42.34233396303359],
                  [-111.3482540845871, 42.34233396303359],
                  [-111.34824335575104, 42.342611513943595],
                  [-111.34787857532501, 42.34262340895521],
                  [-111.34787857532501, 42.34315471717907],
                  [-111.34824872016907, 42.34315471717907],
                  [-111.34824872016907, 42.34287320367939],
                  [-111.34859204292297, 42.342861308715044],
                  [-111.34861350059509, 42.34233792805521],
                  [-111.34894609451294, 42.34233396303359]]]),
            {
              "class": 1,
              "system:index": "23"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.41883373260498, 42.492862611620815],
                  [-111.4184045791626, 42.492862611620815],
                  [-111.41842603683472, 42.49393850252052],
                  [-111.41876935958862, 42.49400178964409],
                  [-111.4187479019165, 42.495172589878976],
                  [-111.419198513031, 42.49520423282436],
                  [-111.41924142837524, 42.493748640765446],
                  [-111.4188551902771, 42.49366953153072],
                  [-111.4188551902771, 42.493179052041995]]]),
            {
              "class": 1,
              "system:index": "24"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.61929130554199, 42.65028703355845],
                  [-111.62160873413086, 42.65186523117176],
                  [-111.62229537963867, 42.65022390482097]]]),
            {
              "class": 1,
              "system:index": "25"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.61259651184082, 42.68680366154745],
                  [-111.61079406738281, 42.68686675314559],
                  [-111.61113739013672, 42.688885650452676],
                  [-111.61208152770996, 42.688885650452676],
                  [-111.61199569702148, 42.68812857165201]]]),
            {
              "class": 1,
              "system:index": "26"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.28395080566406, 42.03252707376823],
                  [-111.29013061523438, 42.03278208132613],
                  [-111.28978729248047, 42.03048697647361],
                  [-111.2856674194336, 42.03048697647361]]]),
            {
              "class": 1,
              "system:index": "27"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.33716583251953, 42.07739264734615],
                  [-111.33270263671875, 42.076628158774156],
                  [-111.33201599121094, 42.079176418199786],
                  [-111.33682250976562, 42.07968605780568]]]),
            {
              "class": 1,
              "system:index": "28"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.37527465820312, 41.98941610040677],
                  [-111.37115478515625, 41.98941610040677],
                  [-111.37115478515625, 41.991457515351726],
                  [-111.3739013671875, 41.991457515351726]]]),
            {
              "class": 1,
              "system:index": "29"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.3028335571289, 42.15692945039651],
                  [-111.30257606506348, 42.15775659716828],
                  [-111.30334854125977, 42.158011101692225],
                  [-111.30343437194824, 42.15718395824701]]]),
            {
              "class": 1,
              "system:index": "30"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.28789901733398, 42.162464765172246],
                  [-111.28789901733398, 42.16360994225761],
                  [-111.28849983215332, 42.16360994225761],
                  [-111.28867149353027, 42.16297373532468]]]),
            {
              "class": 1,
              "system:index": "31"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.35496497154236, 42.242055088118924],
                  [-111.35498642921448, 42.24319088101442],
                  [-111.35536193847656, 42.24318293847773],
                  [-111.35532975196838, 42.242078916151875]]]),
            {
              "class": 1,
              "system:index": "32"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.35572671890259, 42.248583636462975],
                  [-111.35573744773865, 42.25071995988984],
                  [-111.35610222816467, 42.25071995988984],
                  [-111.35608077049255, 42.24862334573677]]]),
            {
              "class": 1,
              "system:index": "33"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.35917067527771, 42.279885659069905],
                  [-111.35918140411377, 42.28168357120351],
                  [-111.35955691337585, 42.28168754004769],
                  [-111.3595461845398, 42.279885659069905]]]),
            {
              "class": 1,
              "system:index": "34"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.33370041814487, 42.27239975852101],
                  [-111.33367359605472, 42.272931659771544],
                  [-111.33439242807071, 42.272943567957114],
                  [-111.33439242807071, 42.2724196056632]]]),
            {
              "class": 1,
              "system:index": "35"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.44491004943848, 42.67039841141403],
                  [-113.44216346740723, 42.670524627865035],
                  [-113.44216346740723, 42.67115570627545],
                  [-113.4444808959961, 42.67115570627545]]]),
            {
              "class": 1,
              "system:index": "36"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.6727557182312, 42.953206915685435],
                  [-112.67179012298584, 42.9538979359537],
                  [-112.67209053039551, 42.95403928005272],
                  [-112.6728630065918, 42.953630951769846]]]),
            {
              "class": 1,
              "system:index": "37"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.66691923403414, 42.95617510692107],
                  [-112.6669836070505, 42.95703883938306],
                  [-112.6673269298044, 42.957070247607746],
                  [-112.66730547213228, 42.95619081125586]]]),
            {
              "class": 1,
              "system:index": "38"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.57371520996094, 42.87507957651939],
                  [-111.57371520996094, 42.88061453423746],
                  [-111.57852172851562, 42.87709234586126]]]),
            {
              "class": 1,
              "system:index": "39"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.69181823730469, 43.00276014051105],
                  [-111.69387817382812, 43.0097899527077],
                  [-111.697998046875, 43.00627514716955]]]),
            {
              "class": 1,
              "system:index": "40"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.97385787963867, 42.19828868799303],
                  [-111.97471618652344, 42.1996875533009],
                  [-111.9752311706543, 42.197907173898265]]]),
            {
              "class": 1,
              "system:index": "41"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.96939468383789, 42.18773261504509],
                  [-111.96939468383789, 42.189258903288],
                  [-111.97059631347656, 42.18773261504509]]]),
            {
              "class": 1,
              "system:index": "42"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.17058181762695, 42.20795295119326],
                  [-112.17023849487305, 42.20922445370071],
                  [-112.17195510864258, 42.208588705646164]]]),
            {
              "class": 1,
              "system:index": "43"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.16680526733398, 42.21113165947414],
                  [-112.16714859008789, 42.21214881234055],
                  [-112.16800689697266, 42.21113165947414]]]),
            {
              "class": 1,
              "system:index": "44"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.25606918334961, 42.20439260801632],
                  [-112.25606918334961, 42.20540986939852],
                  [-112.25727081298828, 42.204519766584845]]]),
            {
              "class": 1,
              "system:index": "45"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.68623113632202, 43.01743854435417],
                  [-112.68580198287964, 43.0170149481775],
                  [-112.68382787704468, 43.019321158674195],
                  [-112.68438577651978, 43.01958785770172],
                  [-112.685866355896, 43.01781507183589]]]),
            {
              "class": 1,
              "system:index": "46"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.66269206935249, 43.017579742430385],
                  [-112.6612544053205, 43.0176738743008],
                  [-112.66123294764839, 43.017924891916465],
                  [-112.65983819896064, 43.017924891916465],
                  [-112.66007423335395, 43.01844261250796],
                  [-112.66179084712348, 43.01806608887432]]]),
            {
              "class": 1,
              "system:index": "47"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.63664245605469, 43.021595907299016],
                  [-112.63636350631714, 43.02136059238399],
                  [-112.63438940048218, 43.02231753408123],
                  [-112.63477563858032, 43.02252147054766],
                  [-112.63627767562866, 43.021925346664865]]]),
            {
              "class": 1,
              "system:index": "48"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.62149333953857, 43.02893727960261],
                  [-112.62147188186646, 43.02818435874628],
                  [-112.6207423210144, 43.028152986843516],
                  [-112.62067794799805, 43.02896865110452]]]),
            {
              "class": 1,
              "system:index": "49"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.54673480987549, 43.081321013918],
                  [-112.54512548446655, 43.08204193831347],
                  [-112.54570484161377, 43.08254344593315],
                  [-112.54716396331787, 43.08172849396648]]]),
            {
              "class": 1,
              "system:index": "50"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.57920026779175, 43.0209272815843],
                  [-112.57845997810364, 43.020942969384066],
                  [-112.57848143577576, 43.02119397363537],
                  [-112.57810592651367, 43.02119397363537],
                  [-112.57810592651367, 43.02174304185754],
                  [-112.5784707069397, 43.02174304185754],
                  [-112.57851362228394, 43.02142928918901],
                  [-112.57883548736572, 43.021460664528014],
                  [-112.57883548736572, 43.02116259816008],
                  [-112.57921099662781, 43.02116259816008]]]),
            {
              "class": 1,
              "system:index": "51"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.58138894772856, 43.020331140307434],
                  [-112.5813782188925, 43.018715259772065],
                  [-112.58100270963041, 43.01870741558809],
                  [-112.58102416730253, 43.02034682825953]]]),
            {
              "class": 1,
              "system:index": "52"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.62242674827576, 42.95680131416457],
                  [-112.62242674827576, 42.95598469154281],
                  [-112.6220190525055, 42.95598469154281],
                  [-112.6220190525055, 42.956848426677496]]]),
            {
              "class": 1,
              "system:index": "53"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.6267397403717, 42.95297722825316],
                  [-112.6267397403717, 42.95270238746404],
                  [-112.62566685676575, 42.95272594529407],
                  [-112.62565612792969, 42.95299293340402]]]),
            {
              "class": 1,
              "system:index": "54"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.6936662197113, 42.938487519421194],
                  [-112.69403100013733, 42.938503228269184],
                  [-112.69399881362915, 42.938204759472264],
                  [-112.69106984138489, 42.93823617730849],
                  [-112.69108057022095, 42.93854250037159]]]),
            {
              "class": 1,
              "system:index": "55"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.69904136657715, 42.93411244928109],
                  [-112.69906282424927, 42.93489008769331],
                  [-112.70014643669128, 42.93487437792356],
                  [-112.70012497901917, 42.93459160138316],
                  [-112.70014643669128, 42.93408888432744]]]),
            {
              "class": 1,
              "system:index": "56"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.75701999664307, 42.941477835153876],
                  [-112.75796413421631, 42.94339419195213],
                  [-112.75916576385498, 42.943142869868886],
                  [-112.75774955749512, 42.94135217032903]]]),
            {
              "class": 1,
              "system:index": "57"
            })]),
    DarkVeg = /* color: #0b4a8b */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.51912689208984, 42.26595507648601],
                  [-111.51904106140137, 42.26671728018269],
                  [-111.51989936828613, 42.26671728018269],
                  [-111.51981353759766, 42.266209145408844]]]),
            {
              "class": 2,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.52994155883789, 42.26525638166856],
                  [-111.52908325195312, 42.26506582719262],
                  [-111.52891159057617, 42.26589155909531],
                  [-111.52985572814941, 42.265764524121906]]]),
            {
              "class": 2,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.56135559082031, 42.279736836550654],
                  [-111.56058311462402, 42.27980033998994],
                  [-111.56041145324707, 42.28043537086283],
                  [-111.56126976013184, 42.28037186806353]]]),
            {
              "class": 2,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.54178619384766, 42.287229800598794],
                  [-111.54109954833984, 42.286975816409445],
                  [-111.54084205627441, 42.287610774962786],
                  [-111.54170036315918, 42.287737765905426]]]),
            {
              "class": 2,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.50505065917969, 42.277831703612776],
                  [-111.50402069091797, 42.277577681535824],
                  [-111.50376319885254, 42.27821273480825],
                  [-111.50444984436035, 42.27840324954201]]]),
            {
              "class": 2,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.59191131591797, 42.380007289020575],
                  [-111.59036636352539, 42.37975367922219],
                  [-111.58985137939453, 42.38102171797086],
                  [-111.59139633178711, 42.381148520437286]]]),
            {
              "class": 2,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.56959533691406, 42.37658347031633],
                  [-111.56753540039062, 42.376710281745495],
                  [-111.56736373901367, 42.37772476396002],
                  [-111.56925201416016, 42.37772476396002]]]),
            {
              "class": 2,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.59980773925781, 42.49124305050528],
                  [-111.59774780273438, 42.49162278865156],
                  [-111.59774780273438, 42.49263541243694],
                  [-111.59894943237305, 42.492255680438696]]]),
            {
              "class": 2,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.60890579223633, 42.54463690094243],
                  [-111.6075325012207, 42.54463690094243],
                  [-111.60770416259766, 42.545522196247504],
                  [-111.60907745361328, 42.545522196247504]]]),
            {
              "class": 2,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.62126541137695, 42.58092371356694],
                  [-111.61954879760742, 42.58105011155729],
                  [-111.61954879760742, 42.58206128625545],
                  [-111.62109375, 42.58206128625545]]]),
            {
              "class": 2,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.63688659667969, 42.60038598528939],
                  [-111.6372299194336, 42.601523202822236],
                  [-111.63843154907227, 42.601649559044596],
                  [-111.63843154907227, 42.600512343818046]]]),
            {
              "class": 2,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.89567947387695, 42.8715757467209],
                  [-112.8958511352539, 42.872393488609504],
                  [-112.89653778076172, 42.87245639138292],
                  [-112.89653778076172, 42.8718273607637]]]),
            {
              "class": 2,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.92254447937012, 42.87849475912831],
                  [-112.92168617248535, 42.87849475912831],
                  [-112.92160034179688, 42.879060825811564],
                  [-112.92228698730469, 42.87912372178912]]]),
            {
              "class": 2,
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.91619300842285, 42.87516114999079],
                  [-112.91559219360352, 42.87516114999079],
                  [-112.91542053222656, 42.8756014483121],
                  [-112.91610717773438, 42.8756014483121]]]),
            {
              "class": 2,
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.92743682861328, 42.86654325045262],
                  [-112.92675018310547, 42.86654325045262],
                  [-112.92649269104004, 42.86710942676614],
                  [-112.92726516723633, 42.86710942676614]]]),
            {
              "class": 2,
              "system:index": "14"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.97198299784213, 42.88038162787711],
                  [-112.97129635233432, 42.88050741707545],
                  [-112.97129635233432, 42.88094767725002],
                  [-112.97189716715366, 42.88088478313171]]]),
            {
              "class": 2,
              "system:index": "15"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.34197235107422, 42.915105919948914],
                  [-111.33888244628906, 42.91435160427168],
                  [-111.33733749389648, 42.9157345092936],
                  [-111.34231567382812, 42.91636309222647]]]),
            {
              "class": 2,
              "system:index": "16"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.19065284729004, 42.91465043421039],
                  [-111.1900520324707, 42.914210414601826],
                  [-111.18902206420898, 42.914839013080865],
                  [-111.19013786315918, 42.91521616909062]]]),
            {
              "class": 2,
              "system:index": "17"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.18618965148926, 42.89578963304007],
                  [-111.18473052978516, 42.89578963304007],
                  [-111.18550300598145, 42.89673281014683]]]),
            {
              "class": 2,
              "system:index": "18"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.2177324295044, 42.91479984863636],
                  [-111.21648788452148, 42.91479984863636],
                  [-111.21610164642334, 42.915774164226704],
                  [-111.21777534484863, 42.91583702276807]]]),
            {
              "class": 2,
              "system:index": "19"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.19704723358154, 42.918979868085465],
                  [-111.1957597732544, 42.91891701275002],
                  [-111.1957597732544, 42.91967127254344],
                  [-111.1972188949585, 42.91970269983447]]]),
            {
              "class": 2,
              "system:index": "20"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.22910499572754, 42.91866559076706],
                  [-111.22751712799072, 42.91916843370704],
                  [-111.22807502746582, 42.91960841791332],
                  [-111.22957706451416, 42.91904272335676]]]),
            {
              "class": 2,
              "system:index": "21"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.22635841369629, 42.91982840883826],
                  [-111.22481346130371, 42.9193569987516],
                  [-111.22378349304199, 42.91998554473233],
                  [-111.2259292602539, 42.920456950010056]]]),
            {
              "class": 2,
              "system:index": "22"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.21069431304932, 42.91938842620291],
                  [-111.20919227600098, 42.91945128105745],
                  [-111.20816230773926, 42.92017410727622],
                  [-111.2100076675415, 42.92023696132926]]]),
            {
              "class": 2,
              "system:index": "23"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.57388687133789, 42.38126120600799],
                  [-111.57259941101074, 42.381134403769124],
                  [-111.57174110412598, 42.381831812913845],
                  [-111.57337188720703, 42.381831812913845]]]),
            {
              "class": 2,
              "system:index": "24"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.56899452209473, 42.377140002164765],
                  [-111.56779289245605, 42.37682297528113],
                  [-111.56779289245605, 42.37758383711306],
                  [-111.5687370300293, 42.37758383711306]]]),
            {
              "class": 2,
              "system:index": "25"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.50771141052246, 42.35526139231831],
                  [-111.50771141052246, 42.35589566214267],
                  [-111.5086555480957, 42.35583223544829]]]),
            {
              "class": 2,
              "system:index": "26"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.5562915802002, 42.351963086040506],
                  [-111.55534744262695, 42.351963086040506],
                  [-111.55517578125, 42.352597389152294],
                  [-111.55603408813477, 42.35266081911142]]]),
            {
              "class": 2,
              "system:index": "27"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.65750741958618, 42.31194563426069],
                  [-111.65735721588135, 42.311564807101185],
                  [-111.6551685333252, 42.311596542785814],
                  [-111.65525436401367, 42.312088443851444],
                  [-111.65688514709473, 42.31200910522992]]]),
            {
              "class": 2,
              "system:index": "28"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.89577341079712, 42.472559794570614],
                  [-111.89581632614136, 42.47200584024951],
                  [-111.89311265945435, 42.471974185568776],
                  [-111.89371347427368, 42.472559794570614]]]),
            {
              "class": 2,
              "system:index": "29"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-111.90130949020386, 42.47324036031027],
                  [-111.89985036849976, 42.47333532238327],
                  [-111.89991474151611, 42.47403170651591],
                  [-111.90098762512207, 42.473968399187676]]]),
            {
              "class": 2,
              "system:index": "30"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.03668594360352, 42.52633720481431],
                  [-112.03685760498047, 42.525072104802916],
                  [-112.03471183776855, 42.52510373261543],
                  [-112.03496932983398, 42.52633720481431]]]),
            {
              "class": 2,
              "system:index": "31"
            })]),
    urban = /* color: #ffc82d */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.46510982513428, 42.89939328166547],
                  [-112.46453046798706, 42.89939328166547],
                  [-112.4644660949707, 42.899849125760674],
                  [-112.46504545211792, 42.899849125760674],
                  [-112.46495962142944, 42.89942471929747]]]),
            {
              "class": 3,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.45925188064575, 42.90121669538806],
                  [-112.45925188064575, 42.902159789484244],
                  [-112.46006727218628, 42.90219122570566],
                  [-112.4599814414978, 42.90121669538806]]]),
            {
              "class": 3,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.45380163192749, 42.902395560754215],
                  [-112.45388746261597, 42.902898536450024],
                  [-112.45455265045166, 42.902882818521654],
                  [-112.45450973510742, 42.902348406572365]]]),
            {
              "class": 3,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.44873762130737, 42.889143816857],
                  [-112.44882345199585, 42.89049584524838],
                  [-112.4498963356018, 42.89049584524838],
                  [-112.44974613189697, 42.88912809542233]]]),
            {
              "class": 3,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.44940280914307, 42.88780748060418],
                  [-112.44938135147095, 42.888106193573165],
                  [-112.44908094406128, 42.888106193573165],
                  [-112.44908094406128, 42.88890799491611],
                  [-112.44981050491333, 42.88889227342135],
                  [-112.44978904724121, 42.887823202375465]]]),
            {
              "class": 3,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.45343685150146, 42.886706946657426],
                  [-112.45272874832153, 42.886706946657426],
                  [-112.45275020599365, 42.887540209879454],
                  [-112.45345830917358, 42.887508766188645]]]),
            {
              "class": 3,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.42805242538452, 42.86944770573087],
                  [-112.42806315422058, 42.870524958288144],
                  [-112.42843866348267, 42.87049350592521],
                  [-112.42843866348267, 42.86946343218081]]]),
            {
              "class": 3,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.4142336845398, 42.85937409136986],
                  [-112.41428732872009, 42.86015267286881],
                  [-112.41605758666992, 42.860121215220786],
                  [-112.41604685783386, 42.859295446228074]]]),
            {
              "class": 3,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.4631142616272, 42.90979832382254],
                  [-112.46324300765991, 42.91059984313678],
                  [-112.46425151824951, 42.91058412717198],
                  [-112.46420860290527, 42.90979832382254]]]),
            {
              "class": 3,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.47049570083618, 42.91004978198434],
                  [-112.4705171585083, 42.91107132021742],
                  [-112.47159004211426, 42.91107132021742],
                  [-112.47154712677002, 42.91012836244953]]]),
            {
              "class": 3,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.93902397155762, 43.53381011763863],
                  [-112.94151306152344, 43.53468125444038],
                  [-112.94142723083496, 43.53281451731332]]]),
            {
              "class": 3,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.93623447418213, 43.540685533652415],
                  [-112.93623447418213, 43.54171211221197],
                  [-112.93735027313232, 43.54080996834818]]]),
            {
              "class": 3,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.95408727834001, 43.539783374427564],
                  [-112.95344354817644, 43.541898760981155],
                  [-112.95443060109392, 43.54205430118076],
                  [-112.95498850056902, 43.54018779230115]]]),
            {
              "class": 3,
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.9299259185791, 43.569776999806564],
                  [-112.9299259185791, 43.57039887042867],
                  [-112.93080568313599, 43.57038332374138],
                  [-112.9308271408081, 43.56982364032596]]]),
            {
              "class": 3,
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.93537616729736, 43.5737568646312],
                  [-112.93535470962524, 43.57434760283587],
                  [-112.93657779693604, 43.57434760283587],
                  [-112.93659925460815, 43.57380350206856]]]),
            {
              "class": 3,
              "system:index": "14"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.43631362915039, 42.85176265138302],
                  [-112.43813753128052, 42.85350876294203],
                  [-112.43852376937866, 42.85335145761778],
                  [-112.43695735931396, 42.851542417590416]]]),
            {
              "class": 3,
              "system:index": "15"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.5909161567688, 42.90874532779051],
                  [-112.58862018585205, 42.91019122291263],
                  [-112.58932828903198, 42.910631271217454],
                  [-112.59134531021118, 42.90916967009277]]]),
            {
              "class": 3,
              "system:index": "16"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.44470357894897, 42.86101188440334],
                  [-112.44369506835938, 42.861357912658335],
                  [-112.4439525604248, 42.86234880102392],
                  [-112.44470357894897, 42.86190840815813]]]),
            {
              "class": 3,
              "system:index": "17"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.43996143341064, 42.85638750250733],
                  [-112.440927028656, 42.85597852689586],
                  [-112.43972539901733, 42.855066186925185],
                  [-112.43882417678833, 42.85525494802497]]]),
            {
              "class": 3,
              "system:index": "18"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.4376654624939, 42.85629312376047],
                  [-112.43768692016602, 42.85685939407793],
                  [-112.43843793869019, 42.85685939407793],
                  [-112.4384593963623, 42.856308853561636],
                  [-112.43828773498535, 42.85635604294107]]]),
            {
              "class": 3,
              "system:index": "19"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.46000289916992, 42.92102263158248],
                  [-112.46026039123535, 42.92303390177781],
                  [-112.46111869812012, 42.92303390177781],
                  [-112.46107578277588, 42.9211797644309]]]),
            {
              "class": 3,
              "system:index": "20"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.46107578277588, 42.91819417178391],
                  [-112.46094703674316, 42.91740846546382],
                  [-112.4600887298584, 42.91737703700263],
                  [-112.46004581451416, 42.9184770236066],
                  [-112.46111869812012, 42.91844559569042]]]),
            {
              "class": 3,
              "system:index": "21"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.45665549969999, 42.90505584549773],
                  [-112.4567842457327, 42.90411279570283],
                  [-112.45489597058622, 42.90417566613796],
                  [-112.45489597058622, 42.905024410737]]]),
            {
              "class": 3,
              "system:index": "22"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.46324300765991, 42.90962556660561],
                  [-112.46317863464355, 42.9106313959168],
                  [-112.46423006057739, 42.91058424803451],
                  [-112.46420860290527, 42.90959413417516]]]),
            {
              "class": 3,
              "system:index": "23"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.46495962142944, 42.90821109136594],
                  [-112.46465921401978, 42.908179658214166],
                  [-112.46463775634766, 42.90893404943275],
                  [-112.46500253677368, 42.90891833304318]]]),
            {
              "class": 3,
              "system:index": "24"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.03897380828857, 43.49637070952169],
                  [-113.03910255432129, 43.49770935184893],
                  [-113.03837299346924, 43.4976159591612],
                  [-113.03824424743652, 43.49864327078156],
                  [-113.03905963897705, 43.49867440116386],
                  [-113.0388879776001, 43.499577175269145],
                  [-113.03966045379639, 43.4997016947761],
                  [-113.03974628448486, 43.49661976150398]]]),
            {
              "class": 3,
              "system:index": "25"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.03820133209229, 43.49652636713099],
                  [-113.03708553314209, 43.49571694318095],
                  [-113.03674221038818, 43.49742917335237],
                  [-113.03772926330566, 43.49755369728911],
                  [-113.03790092468262, 43.49649523564124]]]),
            {
              "class": 3,
              "system:index": "26"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.03562641143799, 43.50166284313675],
                  [-113.03352355957031, 43.502192030986656],
                  [-113.03369522094727, 43.50281459898918],
                  [-113.03566932678223, 43.50228541659633]]]),
            {
              "class": 3,
              "system:index": "27"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.04446697235107, 43.50272121419808],
                  [-113.04481029510498, 43.501974130669026],
                  [-113.0427074432373, 43.501569456564084],
                  [-113.04210662841797, 43.502192030986656]]]),
            {
              "class": 3,
              "system:index": "28"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.93172836172744, 43.56814468033749],
                  [-112.93153524267836, 43.569046415082184],
                  [-112.93271541464492, 43.56909305616731],
                  [-112.93277978766127, 43.568300152808305]]]),
            {
              "class": 3,
              "system:index": "29"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.93119191992446, 43.570787657764605],
                  [-112.93127775061294, 43.56966829324752],
                  [-112.92981862890883, 43.56969938698724],
                  [-112.93007612097426, 43.570865390639135]]]),
            {
              "class": 3,
              "system:index": "30"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.93149232733413, 43.572186834156014],
                  [-112.93153524267836, 43.57128514642788],
                  [-112.92964696753188, 43.57130069288237],
                  [-112.9297757135646, 43.57243557322256]]]),
            {
              "class": 3,
              "system:index": "31"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.94591188430786, 43.52876613647398],
                  [-112.94511795043945, 43.528828366152794],
                  [-112.94511795043945, 43.529326201271964],
                  [-112.94582605361938, 43.52929508669742],
                  [-112.94574022293091, 43.52878169389972]]]),
            {
              "class": 3,
              "system:index": "32"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.9438304901123, 43.52707035301397],
                  [-112.94297218322754, 43.52750597166421],
                  [-112.94325113296509, 43.5280816057696],
                  [-112.94419527053833, 43.52745929838788]]]),
            {
              "class": 3,
              "system:index": "33"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.94432401657104, 43.526276896674545],
                  [-112.94526815414429, 43.525576779472324],
                  [-112.9448390007019, 43.525296730316235],
                  [-112.94387340545654, 43.525965734476735]]]),
            {
              "class": 3,
              "system:index": "34"
            })]),
    SageSoil = /* color: #00ffff */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.91542053222656, 42.95260551806302],
                  [-112.91447639465332, 42.95254269704001],
                  [-112.91421890258789, 42.95317090438453],
                  [-112.91550636291504, 42.95317090438453]]]),
            {
              "class": 4,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.92391777038574, 42.97484013088573],
                  [-112.92271614074707, 42.974777332563335],
                  [-112.92254447937012, 42.97553090819956],
                  [-112.92383193969727, 42.97540531290149]]]),
            {
              "class": 4,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.00125122070312, 43.152129528931624],
                  [-112.99919128417969, 43.152129528931624],
                  [-112.99884796142578, 43.15338185504259],
                  [-113.00039291381836, 43.15338185504259]]]),
            {
              "class": 4,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.93567657470703, 43.18192792762987],
                  [-112.93447494506836, 43.18217827275038],
                  [-112.93413162231445, 43.18305447258804],
                  [-112.93567657470703, 43.18305447258804]]]),
            {
              "class": 4,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.89173126220703, 43.245607706182334],
                  [-112.8900146484375, 43.24548266387405],
                  [-112.8896713256836, 43.24648299515362],
                  [-112.89087295532227, 43.24660803540856]]]),
            {
              "class": 4,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.05086135864258, 43.235103196469005],
                  [-113.04931640625, 43.235228260080895],
                  [-113.04914474487305, 43.23622875973627],
                  [-113.05051803588867, 43.23622875973627]]]),
            {
              "class": 4,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.14424531534314, 43.219718414891695],
                  [-113.14270036295056, 43.219718414891695],
                  [-113.14270036295056, 43.22071916915554],
                  [-113.14407365396619, 43.220594075770855]]]),
            {
              "class": 4,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.13720703125, 43.276235336751434],
                  [-113.13600540161133, 43.27598537765125],
                  [-113.13514709472656, 43.27686023000978],
                  [-113.13634872436523, 43.277110185516314]]]),
            {
              "class": 4,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.33187103271484, 43.145116028480665],
                  [-113.33015441894531, 43.145116028480665],
                  [-113.33015441894531, 43.14611800638684],
                  [-113.33135604858398, 43.14611800638684]]]),
            {
              "class": 4,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.36637496948242, 43.17321288175858],
                  [-113.36637496948242, 43.17365104757888],
                  [-113.36723327636719, 43.1735407728833]]]),
            {
              "class": 4,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.36740493774414, 43.31696488512817],
                  [-113.36585998535156, 43.31696488512817],
                  [-113.36517333984375, 43.31796404179034],
                  [-113.36688995361328, 43.31808893521791]]]),
            {
              "class": 4,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.79467010498047, 43.17544842368996],
                  [-113.79226684570312, 43.174947677234115],
                  [-113.79158020019531, 43.177201003949754],
                  [-113.79467010498047, 43.177201003949754]]]),
            {
              "class": 4,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.1950569152832, 42.74579082317705],
                  [-113.19389820098877, 42.746610229686425],
                  [-113.1959581375122, 42.74657871425171],
                  [-113.19570064544678, 42.74601143368738]]]),
            {
              "class": 4,
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.6124382019043, 42.66542818838904],
                  [-112.60969161987305, 42.66504950722108],
                  [-112.60969161987305, 42.666690442289415],
                  [-112.61260986328125, 42.666690442289415]]]),
            {
              "class": 4,
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.1761741664377, 43.57619331496363],
                  [-113.17548752092989, 43.57718819887346],
                  [-113.17720413469942, 43.577561276101825]]]),
            {
              "class": 4,
              "system:index": "14"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.13858032488497, 43.56972616888689],
                  [-113.13703537249239, 43.570596786694786],
                  [-113.13858032488497, 43.570721159639994]]]),
            {
              "class": 4,
              "system:index": "15"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.0795288112131, 43.5516891125937],
                  [-113.07849884295138, 43.552559991083285],
                  [-113.08021545672091, 43.55268440126879]]]),
            {
              "class": 4,
              "system:index": "16"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.99816131591797, 43.665457846695574],
                  [-112.99614429473877, 43.665457846695574],
                  [-112.99614429473877, 43.66601664065224],
                  [-112.9978609085083, 43.666047684608415]]]),
            {
              "class": 4,
              "system:index": "17"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.9758882522583, 43.705243385898534],
                  [-112.9740858078003, 43.705212362220045],
                  [-112.97395705914823, 43.70573976257076],
                  [-112.97584533429472, 43.7056777157115]]]),
            {
              "class": 4,
              "system:index": "18"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.941856381658, 43.70626715828135],
                  [-112.9394960377249, 43.70586385609658],
                  [-112.93932437634794, 43.70642227378376],
                  [-112.941856381658, 43.70676352647618]]]),
            {
              "class": 4,
              "system:index": "19"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.83289432525635, 43.71343307538878],
                  [-112.83289432525635, 43.713091860668364],
                  [-112.8310489654541, 43.71312288026867],
                  [-112.83109188079834, 43.71355715298725]]]),
            {
              "class": 4,
              "system:index": "20"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.63930320739746, 43.698363371021905],
                  [-112.63835906982422, 43.698301316528095],
                  [-112.63835906982422, 43.69873569663612],
                  [-112.63930320739746, 43.69879775068038]]]),
            {
              "class": 4,
              "system:index": "21"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.58995056152344, 43.69432969534253],
                  [-112.5893497467041, 43.69432969534253],
                  [-112.5893497467041, 43.69488822046663],
                  [-112.59029388427734, 43.69488822046663]]]),
            {
              "class": 4,
              "system:index": "22"
            })]),
    MixedWater = /* color: #8920c2 */ee.FeatureCollection([]),
    projectExtent = /* color: #d63000 */ee.Geometry.Polygon(
        [[[-111.11572265625, 41.97991089691236],
          [-110.9014892578125, 41.98399427093563],
          [-110.9454345703125, 43.830564195198264],
          [-113.851318359375, 43.82263823180498],
          [-113.939208984375, 41.91862886518304],
          [-110.8740234375, 41.91862886518304],
          [-110.885009765625, 41.988077383091586]]]);
		  
//*************************************************************************************************************************
//********************************Collection, Masking, Clipping***************************************************
//*************************************************************************************************************************

Map.setCenter(-112.39, 42.9, 8);
// The order: 1) make band variables and call to invidual landsat scenes, 2) Cloud Mask 3) Image Collection , 4) Reducer & Clip, 5) Display

// 1) Make band variables: Use these Landsat 8 bands for analysis. 
var UseBands = ['B1', 'B2', 'B3', 'B4', 'B5', 'B6', 'B7','B9', 'B10', 'B11'];
var scene1 = ee.Image('LANDSAT/LC8_L1T_TOA/LC80380292016233LGN00');
var scene2 = ee.Image('LANDSAT/LC8_L1T_TOA/LC80380302016233LGN00');
var scene3 = ee.Image('LANDSAT/LC8_L1T_TOA/LC80380312016281LGN00');
var scene4 = ee.Image('LANDSAT/LC8_L1T_TOA/LC80390292016272LGN00');
var scene5 = ee.Image('LANDSAT/LC8_L1T_TOA/LC80390302016272LGN00');
var scene6 = ee.Image('LANDSAT/LC8_L1T_TOA/LC80390312016272LGN00');

// 2) Cloud mask with given cloud score threshold. The cloud band contains the cloud score from 0 (not cloudy) to 100 (most cloudy)
// Be aware that lower thresholds will mask snow cover in addition to clouds and the lower threshold are more susceptible to atmospheric disturbances
function getCloudScore(img) {
  return img.updateMask(ee.Algorithms.Landsat.simpleCloudScore(img).select('cloud').lt(10));
}

// 3) Create Image Collection with Applied Mask
var mosaic = ee.ImageCollection([scene1, scene2, scene3, scene4, scene5, scene6])
.map(getCloudScore)
.select (UseBands)
;

// When using the TOA repository instead of a specific landsat scene delete scene1-6 above (section 1) and use the following by deleting the "/*" and "*/" in code block below
// Filter imagery by date used when code does not call to a specific scene
/*var scene = ee.Image('LANDSAT/LC8_L1T_TOA');
var StartDate = ee.Date('2016-08-01');//
var EndDate = ee.Date('2016-09-01');  //  
var mosaic = ee.ImageCollection(scene)
.map(getCloudScore)
.select (UseBands)
.filterDate(StartDate, EndDate);
*/

// Maintain SENSOR_ID that is lost after image collection is created. This is not necessary for the SWIM script, but good practice if additional functions are used in future.
var mosaiced = ee.Image(ee.ImageCollection(mosaic).first())
  .set('SENSOR_ID','OLI_TIRS');


//4) reducer transforms the image collection into one image, necessary for clipping
var singleimage = mosaic.reduce(ee.Reducer.mean())
      .clip(projectExtent);
var UseBandsMean = ['B1_mean', 'B2_mean', 'B3_mean', 'B4_mean', 'B5_mean', 'B6_mean', 'B7_mean','B9_mean', 'B10_mean', 'B11_mean'];

//5) Landsat 8 image True color composites
Map.addLayer(singleimage, {bands:['B4_mean', 'B3_mean', 'B2_mean'], max:0.4},'mosaic'); 
Export.image.toDrive({image: singleimage, description: 'July_Color_Composite', scale: 30, region: projectExtent, maxPixels: 700000000});

//*************************************************************************************************************************
//********************************Vegetation Indices***********************************************************************
//*************************************************************************************************************************

//Landsat 8 False Color (color infrared)
var FalseColor = (singleimage.select('B5_mean').add(singleimage.select('B4_mean').add(singleimage.select('B3_mean'))));

//Delete "//" below to see the false color index on the map.
//Map.addLayer (singleimage,{bands: ['B5_mean', 'B4_mean', 'B3_mean'], min:0, max:1},'FalseColor');

//Landsat 8 Agriculture
var Agriculture = (singleimage.select('B6_mean').add(singleimage.select('B5_mean').add(singleimage.select('B2_mean'))));

//Delete "//" below to see the agriculture index on the map.
//Map.addLayer (singleimage,{bands: ['B6_mean', 'B5_mean', 'B2_mean'], min:0, max:1},'Agriculture');

//*************************************************************************************************************************
//*********************************Water Indices***************************************************************************
//*************************************************************************************************************************

// mbsrn = NIR(B5) + SWIR1(B6)
var mbsrn = singleimage.select('B5_mean').add(singleimage.select('B6_mean'));
// mbsrv = Green(B3) + Red(B4) 
var mbsrv = singleimage.select('B3_mean').add(singleimage.select('B4_mean')); //calculate mbsrv
//mbsrv > mbsrn- Delete "//" so see this index on the map.
var mbsrThreshold = mbsrv.gt(mbsrn);
//mndwi (green-3, SWIR1-11)
var mndwi = singleimage.normalizedDifference(['B3_mean', 'B6_mean']);

//AWEsh- Delete "//" so see this index on the map.
var B3_Green = singleimage.select('B3_mean');
var B4_Red = singleimage.select('B4_mean');
var B2_Blue = singleimage.select('B2_mean');
var B7_SWIR2 = singleimage.select('B7_mean');
var AWEsh = singleimage.expression(
          '(B2) + (2.5*B3) + (-1.5*MBSRN) + (-0.25*B7)', {
            'B3' : B3_Green,
            'B4' : B4_Red,
            'B2' : B2_Blue,
            'B7' : B7_SWIR2,
            'MBSRN' : mbsrn //Changed from MBSRN to water index variable mbsrn (line 30)
});
//Delete "//" below to see the AWEsh index on the map.
//Map.addLayer(AWEsh,{palette: '000000, ffffff', min: 0, max: 1},'AWEsh'); 

//*************************************************************************************************************************
//************************************topo layers**************************************************************************
//*************************************************************************************************************************

var DEM = SRTM_DEM.clip(projectExtent);
var slope = ee.Terrain.slope(DEM);
var aspect = ee.Terrain.aspect(DEM);

//*************************************************************************************************************************
//***********************************Secondary variables ******************************************************************
//*************************************************************************************************************************

//iron ratio for pulling out iron rich basalt red band / green band
var IronRatio = singleimage.select('B4_mean').divide(singleimage.select('B3_mean'));

//SAVI - produces higher accuracy than NDVI. Good for riparian vegetation
var B4_Red = singleimage.select('B4_mean');
var B5_NIR = singleimage.select('B5_mean');
var SAVI = singleimage.expression(
  '((NIR-red)/(NIR+red+0.5))*1.5', {
            'red' : B4_Red,
            'NIR' : B5_NIR,
});

//*************************************************************************************************************************
//*********************************Tasselled Cap **************************************************************************
//*************************************************************************************************************************

//Tasselled - Testing Landsat 8
var B2_Blue = singleimage.select('B2_mean');
var B3_Green = singleimage.select('B3_mean');
var B4_Red = singleimage.select('B4_mean');
var B5_NIR = singleimage.select('B5_mean');
var B6_SWIR1 = singleimage.select('B6_mean');
var B7_SWIR2 = singleimage.select('B7_mean');

var Wetness = singleimage.expression(
  '0.2798*Blue+0.2054*Green+0.1322*Red-0.2974*NIR-0.5523*SWIR1-0.6015*SWIR2' ,{
      'Blue' : B2_Blue,
      'Green' : B3_Green,
      'Red' : B4_Red,
      'NIR' : B5_NIR,
      'SWIR1' : B6_SWIR1,
      'SWIR2' : B7_SWIR2,
});

//*************************************************************************************************************************
//**********************************mask out Agriculture (option)*******************************************************************
//*************************************************************************************************************************
//using the nlcd
var nlcd = ee.Image('USGS/NLCD/NLCD2011');
var landcover= nlcd.select('landcover');
//project
var repro_nlcd = landcover
    .reproject('EPSG:4326', null, 30);
//Select for the landcover codes you want to mask out
var agriculture = (repro_nlcd.lt(81)).or(landcover.gt(83)).not();
//Mask landcover layer
var landcover_masked = repro_nlcd.mask(agriculture)
.clip(projectExtent);


//*************************************************************************************************************************
//************************************CLASSIFICATION***********************************************************************
//*************************************************************************************************************************

//Make a string of input bands and rename the variables
var inputs = singleimage.addBands([
  mbsrn.rename('mbsrn'),mbsrv.rename('mbsrv'),
  mbsrThreshold.rename('mbsrThreshold'),
  AWEsh.rename('AWEsh'),
  mndwi.rename('mndwi'),
  DEM.rename('elevation'), 
  IronRatio.rename('IronRatio'),
  SAVI.rename('SAVI'),
  aspect.rename('aspect'),
  slope.rename('slope'),
  Agriculture.rename('Agriculture'),
  FalseColor.rename('FalseColor'),
  Wetness.rename('Wetness'),
  ]);

//stack the bands so that they can be put into a Classifier
var bandStack = [
  'B1_mean', 'B2_mean', 'B3_mean', 'B4_mean', 'B5_mean', 'B6_mean', 'B7_mean','B10_mean',
  'mbsrn', 'mbsrv', 
  'mbsrThreshold',
  'B9_mean',
  'AWEsh', 
  'mndwi', 
  'elevation', 
  'slope',
  'aspect',
  'SAVI',
  'IronRatio',
  'Agriculture',
  'FalseColor',
  ];

//combine the image with its raw bands with the created index bands
var inputComposite = inputs.select(bandStack)
//print(inputComposite, "image w/ indices");

// create seeds for pseudo-random numbers to add to the training points 
var seeds = ee.List.sequence(1, 5);

var basaltTraining = inputComposite.sampleRegions({
   collection: basalt,
   properties: ['class'],
  scale: 30
});
var basaltList = ee.FeatureCollection(basaltTraining);

//print (basaltTraining, 'basalt');

var OpenWaterTraining = inputComposite.sampleRegions({
   collection: OpenWater,
   properties: ['class'],
  scale: 30
});
var OpenWaterList = ee.FeatureCollection(OpenWaterTraining);

var DarkVegTraining = inputComposite.sampleRegions({
   collection: DarkVeg,
   properties: ['class'],
  scale: 30
});
var DarkVegList = ee.FeatureCollection(DarkVegTraining);

var urbanTraining = inputComposite.sampleRegions({
   collection: urban,
   properties: ['class'],
  scale: 30
});
var urbanList = ee.FeatureCollection(urbanTraining);

var SageSoilTraining = inputComposite.sampleRegions({
   collection: SageSoil,
   properties: ['class'],
  scale: 30
});
var SageSoilList = ee.FeatureCollection(SageSoilTraining);

// Add the pseudo-random columns to each land cover type to preserve class distribution in test/train
var BasaltR = basaltList.randomColumn('first', seeds[0]).randomColumn('second', seeds[1]).randomColumn('third', seeds[2]).randomColumn('fourth', seeds[3]).randomColumn('fifth', seeds[4]);
var OpenWaterR = OpenWaterList.randomColumn('first', seeds[1]).randomColumn('second', seeds[2]).randomColumn('third', seeds[3]).randomColumn('fourth', seeds[4]).randomColumn('fifth', seeds[0]);
var DarkVegR = DarkVegList.randomColumn('first', seeds[2]).randomColumn('second', seeds[3]).randomColumn('third', seeds[4]).randomColumn('fourth', seeds[0]).randomColumn('fifth', seeds[1]);
var urbanR = urbanList.randomColumn('first', seeds[3]).randomColumn('second', seeds[4]).randomColumn('third', seeds[0]).randomColumn('fourth', seeds[1]).randomColumn('fifth', seeds[2]);
var SageSoilR = SageSoilList.randomColumn('first', seeds[4]).randomColumn('second', seeds[0]).randomColumn('third', seeds[1]).randomColumn('fourth', seeds[2]).randomColumn('fifth', seeds[3]);

//Merge features into a single file
var MyFeats = BasaltR.merge(OpenWaterR).merge(DarkVegR).merge(urbanR).merge(SageSoilR);

// Divide the Sample Areas into random Training and Testing groups
var training1 = MyFeats.filter(ee.Filter.lessThan('first', 0.6));
var testing1 = MyFeats.filter(ee.Filter.greaterThanOrEquals('first', 0.6));
var training2 = MyFeats.filter(ee.Filter.lessThan('second', 0.6));
var testing2 = MyFeats.filter(ee.Filter.greaterThanOrEquals('second', 0.6));
var training3 = MyFeats.filter(ee.Filter.lessThan('third', 0.6));
var testing3 = MyFeats.filter(ee.Filter.greaterThanOrEquals('third', 0.6));
var training4 = MyFeats.filter(ee.Filter.lessThan('fourth', 0.6));
var testing4 = MyFeats.filter(ee.Filter.greaterThanOrEquals('fourth', 0.6));
var training5 = MyFeats.filter(ee.Filter.lessThan('fifth', 0.6));
var testing5 = MyFeats.filter(ee.Filter.greaterThanOrEquals('fifth', 0.6));
Export.table.toDrive(training1, 'TrainingRandom');
Export.table.toDrive(testing1, 'TestingRandom');

//SVM CLASSIFIER
// Make a classifier and train it.
var classifier1 = ee.Classifier.svm().train(training1, 'class', bandStack);
var classifier2 = ee.Classifier.svm().train(training2, 'class', bandStack);
var classifier3 = ee.Classifier.svm().train(training3, 'class', bandStack);
var classifier4 = ee.Classifier.svm().train(training4, 'class', bandStack);
var classifier5 = ee.Classifier.svm().train(training5, 'class', bandStack);

// Classify the input imagery.
var classified1 = inputs.classify(classifier1);
var classified2 = inputs.classify(classifier2);
var classified3 = inputs.classify(classifier3);
var classified4 = inputs.classify(classifier4);
var classified5 = inputs.classify(classifier5);


//ERROR MATRIX: to validate, compare 10% testing points to the classification product in errorMatrix
var validation1 = testing1.classify(classifier1); 
var validation2 = testing2.classify(classifier2);  
var validation3 = testing3.classify(classifier3);
var validation4 = testing4.classify(classifier4);
var validation5 = testing5.classify(classifier5);
var ErMatrix1 = validation1.errorMatrix('class', 'classification');
var ErMatrix2 = validation2.errorMatrix('class', 'classification');
var ErMatrix3 = validation3.errorMatrix('class', 'classification'); 
var ErMatrix4 = validation4.errorMatrix('class', 'classification'); 
var ErMatrix5 = validation5.errorMatrix('class', 'classification'); 


var ErMatrix = (ErMatrix1.array()).add(ErMatrix2.array()).add(ErMatrix3.array()).add(ErMatrix4.array()).add(ErMatrix5.array());
var accuracy = ((ErMatrix1.accuracy().add(ErMatrix2.accuracy()).add(ErMatrix3.accuracy()).add(ErMatrix4.accuracy()).add(ErMatrix5.accuracy())).divide(5));


// Using built-in function to calculate user and producer accuracy
var producers1 = ErMatrix1.producersAccuracy();
var consumers1 = ErMatrix1.consumersAccuracy();
var producers2 = ErMatrix2.producersAccuracy();
var consumers2 = ErMatrix2.consumersAccuracy();
var producers3 = ErMatrix3.producersAccuracy();
var consumers3 = ErMatrix3.consumersAccuracy();
var producers4 = ErMatrix4.producersAccuracy();
var consumers4 = ErMatrix4.consumersAccuracy();
var producers5 = ErMatrix5.producersAccuracy();
var consumers5 = ErMatrix5.consumersAccuracy();
var producerAcc = (((producers1.add(producers2).add(producers3).add(producers4).add(producers5))).divide(5));
var consumerAcc = (((consumers1.add(consumers2).add(consumers3).add(consumers4).add(consumers5))).divide(5));


//*************************************************************************************************************************
//******************************** Print Accuracy Assessments to Console  **************************************************
//*************************************************************************************************************************

print('Error Matrix 1:', ErMatrix1, 'Error Matrix 2', ErMatrix2, 'Error Matrix 3:',ErMatrix3, 'Error Matrix 4:',ErMatrix4, 'Error Matrix 5:',ErMatrix5);
print('Producer Error Matrix 1', producers1, 'Consumer Error Matrix 1',consumers1,'Producer Error Matrix 2',  producers2,'Consumer Error Matrix 2', consumers2, 'Producer Error Matrix 3',producers3,'Consumer Error Matrix 3', consumers3);
print('Over all Producer Accuracy', producerAcc, 'Over all Consumer Accuracy',consumerAcc);

//*************************************************************************************************************************
//**********************************Map Displays **************************************************************************
//*************************************************************************************************************************

//                                        ~~~~~~~ Imagery ~~~~~~~~~~
//5) Landsat 8 image True color composites
//Map.addLayer (singleimage,{bands:['B4_mean', 'B3_mean', 'B2_mean'], min:0, max:1},'S2_TrueColorWet');

//                                        ~~~~~~~ Water Indices~~~~~~~~~~
//Map.addLayer(mbsrn,{palette: '000000, ffffff', min: 500, max: 1},'mbsrn') 
//Map.addLayer(mbsrv,{palette: '000000, ffffff', min: 500, max: 1},'mbsrv') 
//Map.addLayer(mbsrThreshold,{palette: '000000, ffffff'},'mbsrThreshold');
//Map.addLayer(mndwi, {min: -1, max: 1, palette: ['00FFFF', '0000FF']}, 'MNDWI');
//Map.addLayer(ndwi, {min: -1, max: 1, palette: ['00FFFF', '0000FF']}, 'NDWI');

//                                       ~~~~~~~~~~~Topo Layers~~~~~~~~~~
//Map.addLayer(DEM, {min: 0, max: 45, palette: ['ffffff', '0000FF']}, 'elevation');
//Map.addLayer(slope, {min: 0, max: 45, palette: ['ffffff', '0000FF']}, 'slope');
//Map.addLayer(aspect, {min: 0, max: 45, palette: ['ffffff', '0000FF']}, 'aspect');

//                                     ~~~~~~~~~~~ Secondary Variables~~~~~~~~~~~~
//Map.addLayer(IronRatio, {min: 0, max: 2, palette: ['ffffff', '000000']}, 'IronRatio');
//Map.addLayer(SAVI, {min: 0, max: 2, palette: ['ffffff', '000000']}, 'SAVI');
//Map.addLayer(ndvi, {min: 0, max: 1, palette: ['ffffff', '000000']}, 'NDVI');
//Map.addLayer (singleimage,{bands: ['B6_mean', 'B5_mean', 'B2_mean'], min:0, max:1},'Agriculture');
//Map.addLayer (singleimage,{bands: ['B5_mean', 'B4_mean', 'B3_mean'], min:0, max:1},'FalseColor');


//                                  ~~~~~~~~~~~~~Classification~~~~~~~~~~~~~~~~~~
Map.addLayer(classified1, {min: 0, max:5, palette:['black', 'blue', 'black', 'black', 'black', 'teal']},'svm1', 30);
//Map.addLayer(classified2, {min: 0, max:5, palette:['black', 'blue', 'green', 'red', 'tan', 'teal']},'svm2', 30);
//Map.addLayer(classified3, {min: 0, max:5, palette:['black', 'blue', 'green', 'red', 'tan', 'teal']},'svm3', 30);

//                                     ~~~~~~~~~~~ Masks ~~~~~~~~~~~~
//display,color,name
//Map.addLayer(landcover_masked, {palette:['green']}, 'AgMask');
//Map.addLayer(L8masked, ndviVis, 'Cloud Mask');

//*************************************************************************************************************************
//*************************************************Export Training Points or Final Imagery******************************************************************
//*************************************************************************************************************************

//                                    ~~~~~Training Points~~~~~
/*
Export.table.toDrive({collection: samples, description:'samples', fileFormat: 'CSV'});
Export.table.toDrive({collection: BasaltR, description:'BasaltNew', fileFormat: 'KML'});
Export.table.toDrive({collection: OpenWaterR, description:'OpenWaterNew', fileFormat: 'KML'});
Export.table.toDrive({collection: DarkVegR, description:'DarkVegNew', fileFormat: 'KML'});
Export.table.toDrive({collection: urbanR, description:'urbanNew', fileFormat: 'KML'});
Export.table.toDrive({collection: SageSoilR, description:'SageSoilNew', fileFormat: 'KML'});
Export.table.toDrive({collection: MixedWaterR, description:'MixedWaterNew', fileFormat: 'KML'});
Export.table.toDrive({collection: MyFeats, description:'MyFeats', fileFormat: 'KML'});
*/

//                                    ~~~~~Classification~~~~~
Export.image.toDrive({image: classified1, description: 'L8_July_classified1', scale: 30, region: projectExtent, maxPixels: 700000000});
Export.image.toDrive({image: classified2, description: 'L8_July_classified2', scale: 30, region: projectExtent, maxPixels: 700000000});
Export.image.toDrive({image: classified3, description: 'L8_July_classified3', scale: 30, region: projectExtent, maxPixels: 700000000});	
